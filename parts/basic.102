bank jsr getbyt ;get bank number in .x 
 stx current_bank 
 rts 
 
 
;.end 
 .page 
 .subttl  PLAY 
 
; C65 Music Interpreter 
; 
; Syntax : PLAY "music_string" 
; 
; Where : music_string is a string of characters composed of: 
; 
; A..G   : notes 
; W,H,Q,I,S : set note lengths to whole,half,quarter,eighth,sixteenth 
; U   : set volume level   (0-9) 
; O   : set octave    (0-6) 
; T   : set current envelope  (0-9) 
; V   : select voice to play  (1-6: 1-3 right, 4-6 left) 
; X   : filter    (0-1: 0=off, 1=on) 
; M   : measure 
; R   : rest 
; .   : dot 
; #   : sharp 
; $   : flat 
 
 
play jsr frmstr  ;frmevl,frestr,return w/ .A=len, (index)=>string 
; sta sw_rom_ram0  ;???? 
 sta z_p_temp_1  ;save number of characters 
 jsr clear_play_flags ;set 'dot' and 'sharp' to 0. return with Acc=0 
 sta hulp  ;zero counter 
 
10$ ldy hulp 
 cpy z_p_temp_1 
 beq play_rts  ;done! 
 jsr indin1_ram1 
 jsr play_one_character 
 inc hulp 
 bne 10$   ;always 