linget           ldx #0                                   ; enter with CHRGET flags set
                 stx endchr                               ; flags line # input
                 stx linnum                               ; init line # to 0
                 stx linnum+1                             

_local_1033_10   bcs _local_1033_40                       ; it's not a digit, do rts
_local_1033_15   inc endchr                               ; indicate line # input
                 sbc #$2f                                 ; '0'-1 since .c=0
                 sta charac                               ; save for later
                 lda linnum+1                             
                 sta index                                
                 cmp #25                                  ; line number will be < 64000?
                 bcc _local_1033_20                       ; yes, continue
                 bbs1 helper,_local_1033_40               ; no, if called by AutoScroll it's okay
                 +lbra snerr                              ; else syntax error

_local_1033_20   lda linnum                               
                 asl                                      ; multiply by 10
                 rol index                                
                 asl                                      
                 rol index                                
                 adc linnum                               
                 sta linnum                               
                 lda index                                
                 adc linnum+1                             
                 sta linnum+1                             
                 asl linnum                               
                 rol linnum+1                             
                 lda linnum                               
                 adc charac                               ; add in digit
                 sta linnum                               
                 bcc _local_1033_30                       
                 inc linnum+1                             
_local_1033_30                                            
; jsr chrget  ;ALLOW SPACES to terminate number  [910620]
; bra _local_1033_10
                 inw txtptr                               ; get next character from text
                 ldy #0                                   ; re-get current character from text
                 jsr indtxt                               ; lda (txtptr),y from RAM0
                 cmp #' '                                 ; space=eol    [910708]
                 beq _local_1033_50                       
                 cmp #':'                                 ; 
                 bcs _local_1033_40                       ; eol
                 sec                                      
                 sbc #'0'                                 ; alpha or numeric?
                 sec                                      
                 sbc #$d0                                 
                 bcc _local_1033_15                       ; numeric
_local_1033_40   rts                                      ; exit

_local_1033_50   jsr chargt                               ; terminating character is a space, eat it just this once
                 +lbra chrtst                             ; return with flags set appropriately (esp. for 'range')

;.end
; .page
; .subttl LIST

